# 曖昧表現チェッカー MVP

記事本文を貼り付ける → 曖昧表現を検出 → ハイライト表示 → 曖昧度スコア算出 → 前回記事との比較 → 成長度合いを可視化

## MVP1 環境構築・デプロイ準備
### TODO
- [ ] Vite + React + TypeScript セットアップ
- [ ] TailwindCSS + shadcn/ui 導入
- [ ] React Router でルート雛形（`/`=エディタ, `/history`=履歴, `/dashboard`）
- [ ] Firebase プロジェクト作成 & Hosting 有効化
- [ ] Makefile 作成 (`make dev/build/test/deploy`)
- [ ] `.env`作成
（Firebase Hosting/Functions + Supabase + OpenAI API）
- [ ] `gitignore`に`.env`追加
- [ ] README にセットアップ〜デプロイ手順


## MVP2 曖昧表現の検出＆ハイライト
**目的**: 辞書ベースで曖昧表現を即時検出し、記事を可視化

### TODO
- [ ] 曖昧語辞書 v0 作成（推量, ぼかし, 数量, 責任回避）
- [ ] 正規表現ベースの検出ロジック実装
- [ ] Monaco Editor に本文貼付
- [ ] 検出箇所をハイライト表示（severity別カラー）
- [ ] ツールチップに「曖昧な理由」を表示
- [ ] 右ペインに一覧表示（頻度/カテゴリ/登場順でソート）

**受け入れ基準**
- 本文入力→「チェック」で1秒以内にハイライト＆一覧が出る  
- 代表的な曖昧語（例：「かもしれない」「でしょう」）が検出される  

## MVP3 言い換え候補の提示
**目的**: 曖昧表現を明確化するためのシンプルな提案を返す

### TODO
- [ ] Firebase Functions に `POST /rewrite` 実装
- [ ] OpenAI API を利用し候補1案生成（文体を原文に合わせる）
- [ ] 検出アイテムをクリック → 候補表示
- [ ] コピー/差し替え機能を実装

**受け入れ基準**
- 曖昧語クリックで1案が表示される  
- 文体（敬体/常体）が原文に沿う  
- レイテンシ3秒以内  


## MVP4 保存・履歴・全文比較＋統計差分
**目的**: 記事ごとに改善度を比較できるようにする

### TODO
- [ ] Supabase + Prisma スキーマ定義  
  - `Article`, `ArticleVersion`, `CheckRun`, `Finding`, `AimaiPattern`
- [ ] `POST /versions` で本文を保存（プレーンテキスト）
- [ ] `GET /versions` でバージョン一覧を取得
- [ ] `/history` ページで記事一覧＆履歴表示
- [ ] 2バージョン選択 → Monaco DiffEditor で比較
- [ ] 曖昧度スコア算出（件数 / 1000字）
- [ ] 統計差分カード（例：「件数 30 → 10（-66%）」）

**受け入れ基準**
- 記事ごとに履歴が残る  
- 2つのバージョンを全文比較できる  
- 曖昧度スコアと改善度が表示される  

## MVP5 教育ダッシュボード
**目的**: ライターの成長を可視化する

### TODO
- [ ] `author_label` フィールドを記事に追加
- [ ] 集計クエリで曖昧度スコア・改善率・カテゴリ比率を算出
- [ ] `/dashboard` ページ作成  
  - カード：最新 vs 前回の改善率（件数・スコア）  
  - 折れ線：曖昧度スコアの推移  
  - 棒グラフ：カテゴリ別件数の推移  
  - テーブル：頻出曖昧語TOP10  
- [ ] CSVエクスポート機能

**受け入れ基準**
- 最新と前回の比較カードが表示される  
- 時系列で曖昧度スコア推移が見える  
- 自分の頻出曖昧語TOP10が出る  
- CSVエクスポートが可能  


## MVP6 CI/CD・品質担保
**目的**: 安定して開発・デプロイできる体制を構築

### TODO
- [ ] Jest + @testing-library/react 導入
- [ ] サンプルテスト作成（`src/__tests__/sampleComponent.spec.ts`）
- [ ] ESLint + Prettier 導入
- [ ] GitHub Actions で CI/CD 構築  
  - Build / Test / Lint / TypeCheck / Deploy
- [ ] Makefile に `make test` 追加

**受け入れ基準**
- PRでテストが通らないとマージできない  
- mainブランチへマージすると自動デプロイされる  
- ローカル/CIともに `make test` が成功する  


## MVP7 辞書のカスタマイズ
**目的**: チームや個人に合わせた辞書調整を可能にする

### TODO
- [ ] `AimaiDictionary`/`AimaiEntry` テーブル定義
- [ ] CRUD API（辞書の追加・編集・削除）
- [ ] デフォルト辞書の複製機能
- [ ] インポート/エクスポート（JSON）
- [ ] チェック画面で辞書セレクタ追加
- [ ] 履歴に使用した辞書名を保存・表示

**受け入れ基準**
- デフォ辞書を複製→編集→チェックに適用できる
- インポート/エクスポート（JSON）が通る
- 履歴に「どの辞書を使ったか」が残る


## 将来の拡張（任意）
- LLMプロバイダ切替（OpenAI ↔ Gemini）
- 形態素解析で誤検出を減らす
- ハイライトと右ペインの相互スクロール連動
- 採用された言い換え候補を学習して次回に反映
- チームレポート（著者別・カテゴリ別ランキング）
- Chrome拡張（CMS直貼り対応）

## 認証ポリシー
- **MVP時点**: 匿名Authで即利用可能（採用担当はURLを開くだけ）
- **将来**: 必要になれば Email Auth を追加し、匿名ユーザーのデータをリンクして引き継ぎ可能にする

